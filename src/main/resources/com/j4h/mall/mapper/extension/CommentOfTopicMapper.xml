<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.j4h.mall.mapper.extension.CommentOfTopicMapper">
    <select id="queryCommentByValueIdAndType" resultType="com.j4h.mall.model.wx.comment.WxCommentAndUserInfo">
        select add_time as addTime,content,pic_urls as picUrls,user_id as userId from cskaoyan_mall_comment where value_id = #{valueId} and type = #{type}
    </select>

    <select id="countAllByValueIdAndType" resultType="int">
        select count(id) from cskaoyan_mall_comment where value_id = #{valueId} and type = #{type}
    </select>

    <select id="countHasPicByValueIdAndType" resultType="int">
        select count(id) from cskaoyan_mall_comment where value_id = #{valueId} and type = #{type} and has_picture > 0
    </select>
</mapper>
