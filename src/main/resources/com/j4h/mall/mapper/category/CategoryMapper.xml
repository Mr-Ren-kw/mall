<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.j4h.mall.mapper.category.CategoryMapper">

  <select id="getL1Category" resultType="com.j4h.mall.model.category.L1Name">
    select id as `value`,`name` as lable from cskaoyan_mall_category where level = 'L1'
  </select>

  <select id="queryAllCategory" resultMap="categoryMap">
    select id,icon_url as iconUrl,`desc`,keywords,`level`,`name`,pic_url as picUrl from cskaoyan_mall_category where pid = 0
  </select>
  <resultMap id="categoryMap" type="com.j4h.mall.model.category.L1Category">
    <result column="id" property="id"/>
    <result column="iconUrl" property="iconUrl"/>
    <result column="desc" property="desc"/>
    <result column="keywords" property="keywords"/>
    <result column="level" property="level"/>
    <result column="name" property="name"/>
    <result column="picUrl" property="picUrl"/>
    <collection property="children" column="id" select="com.j4h.mall.mapper.category.CategoryMapper.queryL2Category"/>
  </resultMap>
  <select id="queryL2Category" resultType="com.j4h.mall.model.category.L2Category">
    select id,icon_url as iconUrl,`desc`,keywords,`level`,`name`,pic_url as picUrl from cskaoyan_mall_category where pid = #{id}
  </select>
</mapper>
